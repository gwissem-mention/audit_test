parameters:
    hopitalnumerique_publication.twig.publication.class: HopitalNumerique\PublicationBundle\Twig\PublicationExtension
    #Options
    hopital_numerique_publication.options:
    #CronLogger
    hopitalnumerique_publication.service.logger.cronlogger.class: HopitalNumerique\PublicationBundle\DependencyInjection\Logger\CronLogger

services:
    #Extension Twig
    hopitalnumerique_publication.twig.publication_extension:
        class: %hopitalnumerique_publication.twig.publication.class%
        arguments : ["@service_container"]
        tags:
            - { name: twig.extension }

    #Cronlogger
    hopitalnumerique_publication.service.logger.cronlogger:
        class: "%hopitalnumerique_publication.service.logger.cronlogger.class%"
        arguments: ["@logger", "@session"]

    hopitalnumerique_publication.grid.suggestion:
        class: 'HopitalNumerique\PublicationBundle\Grid\SuggestionGrid'
        arguments: ["@service_container"]

    hopitalnumerique_publication.repository.suggestion:
        class: HopitalNumerique\PublicationBundle\Repository\SuggestionRepository
        factory: ["@doctrine.orm.entity_manager", "getRepository"]
        arguments:
            - 'HopitalNumeriquePublicationBundle:Suggestion'

    hopitalnumerique_publication.service.suggestion_converter:
        class: 'HopitalNumerique\PublicationBundle\Service\SuggestionConverter'
        arguments:
            - '@hopitalnumerique_reference.manager.reference'
            - '@hopitalnumerique_reference.manager.entity_has_reference'
            - '@hopitalnumerique_objet.manager.objet'
            - '@filesystem'
            - '@doctrine.orm.entity_manager'

    hopitalnumerique_publication.form.suggestion:
        class: 'HopitalNumerique\PublicationBundle\Form\Type\SuggestionType'
        arguments:
            - '@security.token_storage'
            - '@doctrine.orm.entity_manager'
        tags:
            - { name: form.type }

    hopitalnumerique_publication.service.relation_finder:
        class: HopitalNumerique\PublicationBundle\Service\RelationFinder\RelationFinder

    hopitalnumerique_publication.service.destination_content_source_content:
        class: HopitalNumerique\PublicationBundle\Service\RelationFinder\Finders\DestinationContentToSourceContentFinder
        arguments:
            - "@hopitalnumerique_objet.manager.contenu"
            - "@hopitalnumerique_objet.dependency_injection.production_liee"
        tags:
            - { name: resource.relation_finder }

    hopitalnumerique_publication.service.destionation_content_source_object:
        class: HopitalNumerique\PublicationBundle\Service\RelationFinder\Finders\DestinationContentToSourceObjectFinder
        arguments:
            - "@hopitalnumerique_objet.repository.objet"
            - "@hopitalnumerique_objet.manager.contenu"
            - "@hopitalnumerique_objet.dependency_injection.production_liee"
            - "@hopitalnumerique_publication.service.relation_finder"
        tags:
            - { name: resource.relation_finder }

    hopitalnumerique_publication.service.destination_object_source_object:
        class: HopitalNumerique\PublicationBundle\Service\RelationFinder\Finders\DestinationObjectToSourceObjectFinder
        arguments:
            - "@hopitalnumerique_objet.manager.objet"
            - "@hopitalnumerique_objet.dependency_injection.production_liee"
        tags:
            - { name: resource.relation_finder }

    hopitalnumerique_publication.service.source_content_destination_content:
        class: HopitalNumerique\PublicationBundle\Service\RelationFinder\Finders\SourceContentToDestinationContentFinder
        arguments:
            - "@hopitalnumerique_objet.manager.contenu"
            - "@hopitalnumerique_objet.dependency_injection.production_liee"
        tags:
            - { name: resource.relation_finder }

    hopitalnumerique_publication.service.source_object_destination_content:
        class: HopitalNumerique\PublicationBundle\Service\RelationFinder\Finders\SourceObjectToDestinationContentFinder
        arguments:
            - "@hopitalnumerique_objet.manager.contenu"
            - "@hopitalnumerique_objet.dependency_injection.production_liee"
        tags:
            - { name: resource.relation_finder }

    hopitalnumerique_publication.service.source_object_destination_object:
        class: HopitalNumerique\PublicationBundle\Service\RelationFinder\Finders\SourceObjectToDestinationObjectFinder
        arguments:
            - "@hopitalnumerique_objet.manager.objet"
            - "@hopitalnumerique_objet.dependency_injection.production_liee"
        tags:
            - { name: resource.relation_finder }

    hopitalnumerique_publication.service.source_content_destination_object:
        class: HopitalNumerique\PublicationBundle\Service\RelationFinder\Finders\SourceContentToDestinationObjectFinder
        arguments:
            - "@hopitalnumerique_objet.repository.objet"
            - "@hopitalnumerique_objet.dependency_injection.production_liee"
        tags:
            - { name: resource.relation_finder }

    hopitalnumerique_publication.service.destination_object_source_content:
        class: HopitalNumerique\PublicationBundle\Service\RelationFinder\Finders\DestinationObjectToSourceContent
        arguments:
            - "@hopitalnumerique_objet.manager.contenu"
            - "@hopitalnumerique_objet.dependency_injection.production_liee"
        tags:
            - { name: resource.relation_finder }

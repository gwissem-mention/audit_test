(function(a){a.fn.nSelect=function(e){var c={useCheckAll:true,textall:"- Tout sÃ©lectionner -",classSelect:"nSelect",classSelectAddAll:"nSelectAddAll",classSelectClear:"nSelectClear",useWhenMoreThanXOptions:1};var d=a.extend(c,e);var b=new selectNodevo(a(this),d);b.init();return b}})(jQuery);var selectNodevo=function(a,b){this.selector=a;this.options=b};selectNodevo.prototype={init:function(){if(!this.options.useCheckAll){this.selector.select2(this.options)}else{this.selector.addClass(this.options.classSelect);if(this.selector.find("option").length>this.options.useWhenMoreThanXOptions){var a=$("<option>").val(0).html(this.options.textall).addClass(this.options.classSelectAddAll);this.selector.prepend(a)}var b=this;var c=generetaCloseButton(this.options.classSelectClear,b);this.selector.select2(this.options);this.selector.prev(".select2-container").append(c);this.selector.click(function(){if($(this).find("option:selected").val()){c.show()}else{c.hide()}}).change(function(){var d=this;if(b.selector.find("option:selected").not("."+b.options.classSelectAddAll)){if($(this).find("."+b.options.classSelectAddAll).length<=0&&b.selector.find("option").length>b.options.useWhenMoreThanXOptions){var e=$("<option>").val(0).html(b.options.textall).addClass(b.options.classSelectAddAll);$(this).prepend(e)}}$(this).find("option:selected").each(function(f,g){if($(g).hasClass(b.options.classSelectAddAll)){$(d).find("."+b.options.classSelectAddAll).detach();$(d).select2("destroy").find("option").prop("selected","selected").end().select2(b.options);c=generetaCloseButton(b.options.classSelectClear,b);$(d).prev(".select2-container").append(c);c.show()}});if(b.selector.find("option:selected").not("."+b.options.classSelectAddAll).length==b.selector.find("option").not("."+b.options.classSelectAddAll).length){if(b.selector.find("option."+b.options.classSelectAddAll).length>0){$(d).find("."+b.options.classSelectAddAll).detach()}}})}}};function generetaCloseButton(a,b){var c=$("<input>").attr({type:"button"}).addClass(a).click(function(){b.selector.select2("val","");$(this).hide();if(b.selector.find("."+b.options.classSelectAddAll).length<=0&&b.selector.find("option").length>b.options.useWhenMoreThanXOptions){var d=$("<option>").val(0).html(b.options.textall).addClass(b.options.classSelectAddAll);b.selector.prepend(d)}});return c};
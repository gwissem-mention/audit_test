<div class="panel panel-midnightblue" style="margin:0;" >
    <div style="height:525px;overflow:auto;">
        <div class="panel-body" id="panel-references" >
            {% if references|length > 0 %}
                {% import _self as mySelf %}
                {% for ref in references %}
                    <div class="panel panel-midnightblue">
                        <div class="panel-heading">{{ref.nom}}</div>
                        <div class="panel-body">
                            {{ mySelf.buildTree(ref.childs) }}
                        </div>
                    </div>
                {% endfor %}
            {% else %}
                <h4>- Aucune référence pour ce fil de discussion -</h4>
            {% endif %}
        </div>
    </div>

    <div class="panel-footer" >
        <div class="row">
            <div class="btn-toolbar pull-right" style="margin:0 10px 0 0;">
                <div onclick="$.fancybox.close(true);" class="btn-danger btn">Fermer</div>
            </div>
        </div>
    </div>
</div>


{% macro buildTree(reference) %}
    {% import _self as mySelf %}
    {% for ref in reference  %}
        <li>
            <span class="{% if ref.primary %}text-success{% endif %}">{{ref.nom}}</span>
            {% if ref.childs is defined %}
                <ul>
                    {{ mySelf.buildTree(ref.childs) }}
                </ul>
            {% endif %}
        </li>
    {% endfor %}
{% endmacro %}
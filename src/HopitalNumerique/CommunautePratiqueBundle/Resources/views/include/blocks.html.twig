{% macro display_groupe(groupe) %}
    <div class="groupe">
        <div class="row">
            <div class="col-sm-9">
                <h2>{{ groupe.titre }}</h2>
                <p>
                    {{ groupe.descriptionCourte }}.. <a>En savoir plus</a>
                </p>
                <div class="progression hidden-xs">
                    <div class="dates">
                        <div class="gauche">{{ groupe.dateInscriptionOuverture|date('d/m/Y') }}</div>
                        <div class="milieu">{{ groupe.dateDemarrage|date('d/m/Y') }}</div>
                        <div class="droite">{{ groupe.dateFin|date('d/m/Y') }}</div>
                    </div>
                    <div class="barre" id="date-progression-barre-{{ groupe.id }}"><div class="contenu"></div></div>
                    <div class="legende">
                        <div class="gauche">Inscription</div>
                        <div class="milieu">Démarrage</div>
                        <div class="droite">Fermeture</div>
                    </div>
                </div>
            </div>
            <div class="col-sm-3">
                <p>
                    Places restantes
                    <br><strong>{{ groupe.animateurs|length }} sur {{ groupe.nombreParticipantsMaximum }}</strong>
                </p>
                <div class="places-progression hidden-xs" id="places-progression-barre-{{ groupe.id }}"><div class="contenu"></div></div>
                {% if date('now') >= groupe.dateDemarrage %}
                    <a class="button" onclick="Contact_Popup.display({{ groupe.animateurEmailsJson }}, '{{ path(app.request.get('_route')) }}', 'Je souhaite participer au groupe {{ groupe.titre|replace({ '\'':'\\\'', '"':'' }) }}');">Groupe démarré contactez l'administrateur</a>
                {% elseif groupe.animateurs|length >= groupe.nombreParticipantsMaximum %}
                    <a class="button" onclick="Contact_Popup.display({{ groupe.animateurEmailsJson }}, '{{ path(app.request.get('_route')) }}', 'Je souhaite participer au groupe {{ groupe.titre|replace({ '\'':'\\\'', '"':'' }) }}');">Groupe complet contactez l'animateur</a>
                {% elseif date('now') < groupe.dateInscriptionOuverture %}
                    <a class="button">Inscription dans <span class="jours-restants"><span>{{ groupe.nombreJoursRestantsAvantInscriptionOuverture }}</span> jour{{ groupe.nombreJoursRestantsAvantInscriptionOuverture > 1 ? 's' : '' }}</span></a>
                {% elseif (app.user.hasCommunautePratiqueGroupe(groupe) == false) %}
                    <a class="button" href="{{ path('hopitalnumerique_communautepratique_groupe_inscrit', { 'groupe':groupe.id }) }}">Rejoindre ce groupe</a>
                {% else %}
                    <span class="button inactive">Vous êtes inscrit</span>
                {% endif %}
            </div>
        </div>
    </div>
    <script type="text/javascript">
        $(document).ready(function() {
            CommunautePratique_Groupe_DateProgression.displayProgression({{ groupe.id }}, {{ groupe.dateInscriptionOuverture|date('U') }}, {{ groupe.dateDemarrage|date('U') }}, {{ groupe.dateFin|date('U') }});
            CommunautePratique_Groupe_PlaceProgression.displayProgression({{ groupe.id }}, {{ groupe.nombreParticipantsMaximum }}, {{ groupe.animateurs|length }});
        });
    </script>
{% endmacro %}

{% macro display_action_contact_animateur(groupe) %}
    <div class="contact">
        <a onclick="Contact_Popup.display({{ groupe.animateurEmailsJson }}, '{{ path( app.request.get('_route'), app.request.get('_route_params') ) }}');">
            <em class="icon-help9"></em>
            Envoyer un message<br>à l'animateur du groupe
        </a>
    </div>
{% endmacro %}

{% macro display_groupe_sommaire(groupe) %}
    <div class="communaute-de-pratiques-sommaire">
        <div class="row">
            <div class="col-md-4">
                <a href="{{ path('hopitalnumerique_communautepratique_document_listbygroupe', { 'groupe':groupe.id }) }}"><em class="icon icon-documents7"></em> Mes documents pour ce groupe</a>
            </div>
            <div class="col-md-4">
                <a><em class="icon icon-social20"></em> Fiches des membres du groupe</a>
            </div>
            <div class="col-md-4">
                <a href="{{ path('hopitalnumerique_communautepratique_accueil_index') }}"><em class="fa fa-arrow-left"></em> Retour à la communauté</a>
            </div>
        </div>
    </div>
{% endmacro %}

{% macro display_bloc_document(document) %}
    <div class="col-md-3" data-communaute-pratique-document-id="{{ document.id }}">
        <div class="communaute-de-pratiques-document">
            <div class="delete"><a onclick="CommunautePratique_Document.delete({{ document.id }});"><em class="fa fa-trash-o"></em></a></div>
            <div class="icone">
                {{ document.iconeHtml|raw }}
            </div>
            <div class="contenu">
                <div class="nom"><span title="{{ document }}">{{ document|truncate(15) }}</span> <span class="size">{{ document.sizeLibelle }}</span></div>
                <div class="date">Déposé le <span>{{ document.dateCreation|date('d/m/Y') }}</span></div>
            </div>
        </div>
    </div>
{% endmacro %}

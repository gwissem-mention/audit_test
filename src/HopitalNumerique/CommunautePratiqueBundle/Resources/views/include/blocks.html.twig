{% macro display_groupe(groupe) %}
    <div class="groupe">
        <div class="row">
            <div class="col-sm-9">
                <h2>{{ groupe.titre }}</h2>
                <p>
                    {{ groupe.descriptionCourte }}.. <a>En savoir plus</a>
                </p>
                <div class="progression hidden-xs">
                    <div class="dates">
                        <div class="gauche">{{ groupe.dateInscriptionOuverture|date('d/m/Y') }}</div>
                        <div class="milieu">{{ groupe.dateDemarrage|date('d/m/Y') }}</div>
                        <div class="droite">{{ groupe.dateFin|date('d/m/Y') }}</div>
                    </div>
                    <div class="barre" id="date-progression-barre-{{ groupe.id }}"><div class="contenu"></div></div>
                    <div class="legende">
                        <div class="gauche">Inscription</div>
                        <div class="milieu">Démarrage</div>
                        <div class="droite">Fermeture</div>
                    </div>
                </div>
            </div>
            <div class="col-sm-3">
                <p>
                    Places restantes
                    <br><strong>{{ groupe.animateurs|length }} sur {{ groupe.nombreParticipantsMaximum }}</strong>
                </p>
                <div class="places-progression hidden-xs" id="places-progression-barre-{{ groupe.id }}"><div class="contenu"></div></div>
                {% if date('now') >= groupe.dateDemarrage %}
                    <a class="button" onclick="Contact_Popup.display({{ groupe.animateurEmailsJson }}, '{{ path(app.request.get('_route')) }}', 'Je souhaite participer au groupe {{ groupe.titre|replace({ '\'':'\\\'', '"':'' }) }}');">Groupe démarré contactez l'administrateur</a>
                {% elseif groupe.animateurs|length >= groupe.nombreParticipantsMaximum %}
                    <a class="button" onclick="Contact_Popup.display({{ groupe.animateurEmailsJson }}, '{{ path(app.request.get('_route')) }}', 'Je souhaite participer au groupe {{ groupe.titre|replace({ '\'':'\\\'', '"':'' }) }}');">Groupe complet contactez l'animateur</a>
                {% elseif date('now') < groupe.dateInscriptionOuverture %}
                    <a class="button">Inscription dans <span class="jours-restants"><span>{{ groupe.nombreJoursRestantsAvantInscriptionOuverture }}</span> jour{{ groupe.nombreJoursRestantsAvantInscriptionOuverture > 1 ? 's' : '' }}</span></a>
                {% else %}
                    <a class="button" href="{{ path('hopitalnumerique_communautepratique_groupe_inscrit', { 'groupe':groupe.id }) }}">Rejoindre ce groupe</a>
                {% endif %}
            </div>
        </div>
    </div>
    <script type="text/javascript">
        $(document).ready(function() {
            CommunautePratique_Groupe_DateProgression.displayProgression({{ groupe.id }}, {{ groupe.dateInscriptionOuverture|date('U') }}, {{ groupe.dateDemarrage|date('U') }}, {{ groupe.dateFin|date('U') }});
            CommunautePratique_Groupe_PlaceProgression.displayProgression({{ groupe.id }}, {{ groupe.nombreParticipantsMaximum }}, {{ groupe.animateurs|length }});
        });
    </script>
{% endmacro %}

imports:
    - { resource: 'services/manager.yml' }
    - { resource: 'services/form.yml' }

services:
    hopitalnumerique_reference.grid.reference:
        class: 'HopitalNumerique\ReferenceBundle\Grid\ReferenceGrid'
        arguments: ["@service_container"]

    hopitalnumerique.twig.ref_extension:
        class: HopitalNumerique\ReferenceBundle\Twig\ReferenceExtension
        arguments : ["@hopitalnumerique_reference.manager.reference"]
        tags:
            - { name: twig.extension }

    hopitalnumerique.twig.extension.referencement:
        class: 'HopitalNumerique\ReferenceBundle\Twig\ReferencementExtension'
        arguments : ['@hopitalnumerique_domaine.dependency_injection.current_domaine', '@hopitalnumerique_reference.doctrine.referencement.note_reader']
        tags:
            - { name: 'twig.extension' }

    hopitalnumerique_reference.dependency_injection.referencement:
        class: 'HopitalNumerique\ReferenceBundle\DependencyInjection\Referencement'
        arguments: ['@hopitalnumerique_reference.dependency_injection.reference.tree', '@hopitalnumerique_reference.manager.reference', '@hopitalnumerique_reference.manager.entity_has_reference']

    hopitalnumerique_reference.dependency_injection.referencement.entity:
        class: 'HopitalNumerique\ReferenceBundle\DependencyInjection\Referencement\Entity'
        arguments: ['@hopitalnumerique_objet.manager.objet', '@hopitalnumerique_objet.manager.contenu']

    hopitalnumerique_reference.dependency_injection.reference.tree:
        class: 'HopitalNumerique\ReferenceBundle\DependencyInjection\Reference\Tree'
        arguments: ['@hopitalnumerique_reference.manager.reference']

    hopitalnumerique_reference.doctrine.reference.domaine_udpater:
        class: 'HopitalNumerique\ReferenceBundle\Doctrine\Reference\DomaineUpdater'

    hopitalnumerique_reference.doctrine.referencement.note_saver:
        class: 'HopitalNumerique\ReferenceBundle\Doctrine\Referencement\NoteSaver'
        arguments: ['@hopitalnumerique_reference.dependency_injection.referencement', '@hopitalnumerique_reference.manager.entity_has_reference', '@hopitalnumerique_reference.manager.entity_has_note']

    hopitalnumerique_reference.doctrine.referencement.note_reader:
        class: 'HopitalNumerique\ReferenceBundle\Doctrine\Referencement\NoteReader'
        arguments: ['@hopitalnumerique_reference.dependency_injection.referencement.entity', '@hopitalnumerique_reference.manager.entity_has_note', '@hopitalnumerique_reference.dependency_injection.referencement.entity']
